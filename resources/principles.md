# プロンプトエンジニアリング5原則

## 📐 原則1：明確性の原則
**曖昧さを排除し、具体的な指示を与える**

### なぜ重要か
AIは文脈を推測することが苦手です。明確な指示により、意図した出力を得やすくなります。

### 実践方法

**❌ 悪い例：曖昧な指示**
```
いい感じのキャラクターを作って
```

**✅ 良い例：具体的な指示**
```
以下の条件でキャラクターを作成してください：
- 年齢：28歳
- 職業：図書館司書
- 性格：内向的だが、本の話になると情熱的
- 価値観：知識を通じて人々を繋ぎたい
```

### チェックリスト
- [ ] 5W1Hが明確か
- [ ] 数値や範囲が具体的か
- [ ] 期待する形式を示したか
- [ ] 避けたいことも明示したか

---

## 🧩 原則2：制約活用の原則
**LLMの限界を理解し、それを前提とした設計**

### 主な制約と対策

#### 1. コンテキストウィンドウの限界
**制約**：一度に処理できる文字数に上限がある
**対策**：
- 重要情報を冒頭と結末に配置
- 長い文章は分割して処理
- 要約を活用

#### 2. Lost in the Middle現象
**制約**：長文の中央部分を忘れやすい
**対策**：
- 3-5段落ごとに要点を繰り返す
- 重要な設定は複数箇所で言及
- 構造化されたフォーマットを使用

#### 3. 時系列の混乱
**制約**：複雑な時間軸を追跡しにくい
**対策**：
- 明確なタイムスタンプを使用
- 時系列を単純化
- 章ごとに時間を明示

### 制約を強みに変える
```
制約：キャラクターの一貫性維持が困難
　↓
対策：3層構造（不変・準安定・可変）で管理
　↓
結果：より体系的なキャラクター設計が可能に
```

---

## 🔄 原則3：段階的構築の原則
**複雑なタスクを小さなステップに分解**

### ステップ分解の例

#### キャラクター作成
```
Step 1: 基本属性（名前、年齢、職業）
　↓
Step 2: 核となる価値観
　↓
Step 3: 価値観から派生する恐れ
　↓
Step 4: 人間的な矛盾
　↓
Step 5: 具体的な行動パターン
```

#### 物語構築
```
Step 1: 一文でのあらすじ
　↓
Step 2: 3幕構成の概要
　↓
Step 3: 重要シーンの選定
　↓
Step 4: 各シーンの詳細設計
　↓
Step 5: シーン間の繋ぎ
```

### 段階的構築のメリット
1. **品質管理**：各段階で確認・修正が可能
2. **柔軟性**：途中での方向転換が容易
3. **理解度向上**：AIが文脈を保持しやすい
4. **再利用性**：各段階の成果を他に応用可能

---

## 📌 原則4：文脈保持の原則
**重要な情報を適切に配置し、一貫性を保つ**

### 文脈保持のテクニック

#### 1. サンドイッチ構造
```
[重要な設定・ルール]
　　　↓
[詳細な内容・展開]
　　　↓
[重要な設定の再確認]
```

#### 2. アンカーポイント設置
各セクションの冒頭に、以下を配置：
- キャラクターの核となる価値観
- 現在の場所と時間
- 直前の出来事の要約

#### 3. 構造化フォーマット
```markdown
## シーン情報
- 場所：[具体的な場所]
- 時間：[時刻・天候]
- 登場人物：[誰がいるか]

## 前シーンからの流れ
[簡潔な要約]

## このシーンの目的
[何を達成するか]
```

### 実装例
```
プロンプト構成：
1. キャラクター設定（200字）
2. 現在の状況（100字）
3. 書いてほしいシーン（本文）
4. 注意事項（50字）
5. キャラクター設定の再掲（100字）
```

---

## ✅ 原則5：検証可能性の原則
**出力の品質を客観的に評価できる仕組み**

### 評価基準の設定

#### 定量的評価
1. **文字数**：指定範囲内か
2. **構成要素**：必須要素が含まれているか
3. **一貫性スコア**：矛盾の数をカウント
4. **可読性指標**：文の長さ、段落構成

#### 定性的評価
1. **感情曲線**：意図した感情変化があるか
2. **キャラクター性**：らしさが出ているか
3. **テーマ性**：主題が表現されているか
4. **完成度**：物語として成立しているか

### チェックリストの活用
```markdown
シーン評価：
- [ ] 主人公の価値観に沿った行動か
- [ ] 時間・場所の整合性は取れているか
- [ ] 感情の変化は自然か
- [ ] 次のシーンへの橋渡しはあるか
- [ ] 読者が状況を理解できるか
```

### 反復改善プロセス
```
1. 初稿生成
　↓
2. チェックリスト評価
　↓
3. 問題点の特定
　↓
4. 修正プロンプト作成
　↓
5. 再生成
　↓
6. 比較評価
```

---

## 🎯 5原則の統合的活用

### 実践例：短編小説の作成

**Step 1：明確な指示**（原則1）
```
5000字の短編小説を書いてください。
ジャンル：ヒューマンドラマ
テーマ：過去との和解
```

**Step 2：制約の考慮**（原則2）
```
重要な設定は冒頭に配置
複雑な時系列は避ける
場所は3箇所以内に限定
```

**Step 3：段階的作成**（原則3）
```
Phase 1: プロット作成（500字）
Phase 2: 重要シーン3つの詳細（各300字）
Phase 3: 全体の執筆（5000字）
```

**Step 4：文脈の維持**（原則4）
```
各シーンの冒頭で：
- 主人公の現在の感情
- 場所と時間
- 直前の出来事
を明示
```

**Step 5：品質検証**（原則5）
```
評価項目：
✓ 文字数：4800字（目標の96%）
✓ キャラクター一貫性：8/10
✓ 感情の流れ：自然
✓ テーマの表現：明確
```

---

## 📚 原則の深い理解のために

### 練習問題

#### 練習1：明確性の向上
以下のプロンプトを改善してください：
「悲しい話を書いて」

#### 練習2：制約の活用
10,000字の物語を、Lost in the Middle現象を考慮して構成してください。

#### 練習3：段階的構築
「宇宙船での殺人事件」を5つのステップで構築してください。

#### 練習4：文脈保持
3つのシーンを跨いで、主人公の価値観を一貫させる方法を設計してください。

#### 練習5：検証可能性
ミステリー小説の品質を評価する5つの客観的指標を設定してください。

---

## 🔮 今後の展望

### AIの進化と原則の関係
- モデルが進化しても、5原則は有効
- 制約が変わっても、考え方は応用可能
- より高度な創作への適用

### 新しい可能性
1. **マルチモーダル**：画像＋文章での物語創作
2. **インタラクティブ**：読者の選択で変化する物語
3. **協調創作**：複数のAIとの共同作業

---

💡 **Remember**: これらの原則は道具です。創造性を制限するものではなく、より良い作品を生み出すための指針として活用してください。